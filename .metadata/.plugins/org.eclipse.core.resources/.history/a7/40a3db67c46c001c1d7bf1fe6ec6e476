package Exercice3;

import java.util.Scanner;
class Pharmacie {
 private static Scanner scanner = new Scanner(System.in);
 public static void main (String args[]) {
 Client[] clients = new Client[2];
 Medicament[] medicaments = new Medicament[2];
 clients[0] = new Client("Malfichu",0.0);
 clients[1] = new Client("Palichon",0.0);
 medicaments[0] = new Medicament("Aspiron", 20.40, 5);
 medicaments[1] = new Medicament("Rhinoplexil",19.15, 5);
 int choix;
 do {
 choix = menu();
 switch (choix) {
 case 1 :
 achat(clients, medicaments);
 break;
 case 2 :
 approvisionnement(medicaments);
 break;
 case 3 :
 affichage(clients, medicaments);
 break;
 case 4:
 quitter();
 }
 }
 while (choix < 4);
 }
 // Les méthodes utilitaires
 static int menu() {
 int choix = 0;
 System.out.println();
 System.out.println();
 System.out.println("1 : Achat de médicament");
 System.out.println("2 : Approvisionnement en médicaments");
 System.out.println("3 : Etats des stocks et des crédits");
 System.out.println("4 : Quitter");
 while ((choix != 1) && (choix != 2) && (choix != 3) && (choix != 4)) {
	 System.out.println("-----------------");
	 System.out.print("Veuillez choisir un numéro: ");
	 choix = scanner.nextInt();
 }
 return choix;
 }
   //----------------------------------
 // Méthodes auxiliaires à compléter
 	public static void affichage(Client[] clients, Medicament[] medocs) {
 		System.out.println("Les clients de la pharmacie : ");
 		for(int i=0; i<clients.length;i++) {
 			System.out.println("Le client " + clients[i].getNom() + " a un crédit de " + clients[i].getCredit()+ " pour la pharmacie.");
 		}
 		System.out.println("Les médicaments disponibles dans la pharmacie : ");
 		for(int i=0; i<medocs.length; i++) {
 			System.out.println("Le médicament " + medocs[i].getNom() + " dispose de " + medocs[i].getStock() + " exemplaires dans la pharmacie et se vend l'unité à " + medocs[i].getPrix() + ". ");
 		}
 	}
 	// ----------------------------------
 	public static void approvisionnement(Medicament[] medocs) {
 		System.out.print("Donnez le nom du médicament recherché: ");
 		String namedoc = scanner.next();
 		while(lireMedicament(namedoc, medocs) == null){
 			System.out.print("veillez donner le nom approprié du médicament que vous recherchez: ");
 			scanner.reset();
 			namedoc = scanner.next();
 		};
 		Medicament medoc = lireMedicament(namedoc, medocs);
 		System.out.print("Veuillez donner la quantité à approvisionner: ");
 		int valuedoc = scanner.nextInt();
 		medoc.setStock(medoc.getStock() + valuedoc);
 	}
 	// ----------------------------------
 	public static void achat(Client[] clients, Medicament[] medocs) {
 		Client present = lireClient(clients);
 		System.out.print("Veuillez me donner l'argent à payer: ");
 		double prix = scanner.nextDouble();
 	}
 	// ----------------------------------
 	public static void quitter() {
 		System.out.println("Sortie");
 		System.out.println("J'espère que vous êtes satisfait de nos services");
 	}
 	// ----------------------------------
 	public static Medicament lireMedicament(String nom, Medicament[] medocs) {
 		Medicament medoc = null;
 		for(int i=0; i<medocs.length; i++) {
 			if(medocs[i].getNom().equals(nom) ) {
 				medoc = medocs[i];
 			}
 			}
 		return medoc;
 	}
 	// ----------------------------------
 	public static Client lireClient(Client[] clients) {
 		System.out.print("Nom du client: ");
 		Client client = null;
 		String nom = scanner.next();
	 		for(int i=0; i<clients.length; i++) {
	 			if(clients[i].getNom().equals(nom) ) {
	 				client = clients[i];
	 			}
	 		}
	 		while(client==null){
 			System.out.println("Veuillez vérifier si vous ne vous êtes pas trompé sur le nom : ");
 			scanner.reset();
 			nom = scanner.next();
 	 		for(int i=0; i<clients.length; i++) {
 	 			if(clients[i].getNom().equals(nom) ) {
 	 				client = clients[i];
 	 			}
 	 		}
 		};
 		return client;
 	}
 	// ----------------------------------
}
// Autres classes à compléter